<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.11: http://docutils.sourceforge.net/" />
<title>Pacote IRAF Beacon-reduc</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<style type="text/css">

/*body {
   width: 1000px;
   margin-left: auto;
   margin-right: auto;
}
*/
table {
    margin: 0 auto;
    text-align: center;
    border-collapse: collapse;
    vertical-align: center;
    valig: center;
}

th,
td {
    padding: 5px;
    vertical-align: middle;
    /*text-align: left;*/
    /*border-bottom: 1px solid #ddd;*/
}

tr:nth-child(even) {
    background-color: #e6e6e6
}

tr:hover {
    background-color: #bfbfbf
}

.strike {
  text-decoration: line-through;
}

p {
    max-width: 1000px;
    text-align: justify;
    text-justify: inter-word;
} 

li {
    max-width: 1000px;
    text-align: justify;
    text-justify: inter-word;
}

</style>
</head>
<body>
<div class="document" id="pacote-iraf-beacon-reduc">
<h1 class="title">Pacote IRAF Beacon-reduc</h1>
<h2 class="subtitle" id="log-das-modificacoes-das-tarefas">Log das modificações das tarefas</h2>

<div class="section" id="ver-2-1-4-moser">
<h1>ver 2.1.4, Moser</h1>
<ol class="arabic simple">
<li>Todos os caminhos que apontavam para <cite>/iraf/iraf-v2.16/</cite> foram substituídos por <cite>iraf$</cite></li>
<li>Tudo relacionado com espectroscopia foi atualizado.</li>
<li>Estrutura subpastas:</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>'lamps' contém informações sobre as lâmpadas ECASS e MUSICOS</li>
<li>'scripts' contém executáveis Python e shell</li>
</ol>
</blockquote>
<ol class="arabic simple" start="4">
<li>Rotina <cite>logpol</cite> renomeada para <cite>pollog</cite>. Isto porque a rotina indepedia digitar <cite>log</cite> para sair do ambiente IRAF.</li>
</ol>
</div>
<div class="section" id="ver-2-1-3-bednarski">
<h1>ver 2.1.3, Bednarski</h1>
<ol class="arabic simple">
<li>ccdrap_301.cl: adicionado o mesmo parâmetro 'frame' que fora adicionado já para o ccdrap.cl na versão 2.1.0.</li>
</ol>
</div>
<div class="section" id="ver-2-1-2-bednarski">
<h1>ver 2.1.2, Bednarski</h1>
<ol class="arabic simple">
<li>ccdrap.cl: adicionado o parâmetro boleano &quot;ver1stwp&quot;, que pergunta ao usuário se ele quer verificar se a primeira posição de lâmina está registrada como L0 no cabeçalho.</li>
<li>reduce.cl:</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>adicionado o mesmo parâmetro &quot;ver1stwp&quot; para setar diretamente esse parâmetro no ccdrap.</li>
<li>agora verifica se o parâmetro reject é MENOR que o limite pré-estabelecido através das configurações dos headers.</li>
</ol>
</blockquote>
</div>
<div class="section" id="ver-2-1-1-bednarski">
<h1>ver 2.1.1, Bednarski</h1>
<ol class="arabic simple">
<li>suape: consertado, com o parâmetro &quot;convert=ascii&quot; retirado, pois estava causando bugs.</li>
<li>calib_301.cl: adicionei &quot;add=yes&quot; na chamado do hedit para editar o parâmetro DARKTIME, pois se este campo já não existia, não estava sendo criado automaticamente!</li>
<li>ccdrap_301.cl: vários bugs corrigidos.</li>
<li>reduce_301.cl: agrupa 8 posições de lâmina também, como a tarefa &quot;reduce.cl&quot;.</li>
<li>jdrap.cl: swap chamado com tcheck=no para evitar bugs.</li>
</ol>
</div>
<div class="section" id="ver-2-1-0-bednarski">
<h1>ver 2.1.0, Bednarski</h1>
<ol class="arabic simple">
<li>reduce.cl: verifica se os ganhos (pre-amp) no cabeçalho das séries são iguais aos do cabeçalho das calibrações que serão utilizadas.</li>
<li>ccdrap.cl:</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>verifica se a primeira posição de lâmina da série é de fato a L0.</li>
<li>acrescentei parâmetro &quot;frame&quot; sobre em qual frame mostrar as imagens no DS9. Isso é útil para reduções em paralelo (com dois terminais cl abertos simultaneamente, usando dois frames diferentes do mesmo DS9).</li>
</ol>
</blockquote>
</div>
<div class="section" id="ver-2-0-bednarski-e-moser">
<h1>ver 2.0, Bednarski e Moser</h1>
<ol class="arabic simple">
<li>ccdrap.cl (Moser e Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>jun2014: O IRAF 2.16 não aceita mais * como indicador para output de rotinas como referência ao * no parâmetro de entrada. Implementei as modificações do Moser sobre meu ccdrap.cl de substituição dos * por listas de arquivos (&#64;lista).</li>
<li>jun2014: O arquivo que guarda as coordenadas do alvo agora é independente da versão .1, .2, .3, etc. Assim, não é mais preciso mais selecionar os objetos ordinário e extraordinário várias vezes para as versões diferentes.</li>
<li>ago2014: Acrescentei parâmetros para entrada de um arquivo de coordenadas, caso desejado, no qual o daoedit se baseará para encontrar os feixes ordinário/extraordinário (os parâmetros novos são coordref, coord e icom). Esses parâmetros são úteis para o reduce indentificar automaticamente as coordenadas nos outros filtros a partir do primeiro, devendo apenas o usuário confirmá-las. O shell script &quot;icom&quot; é necessário para a entrada do daedit e seu caminho deve ser referenciado no parâmetro homônimo do ccdrap.</li>
<li>ago2014: Adicionei a impressão dos novos parâmetros no ccdraplog (assim como stack1st que não havia sido adicionado).</li>
<li>set2014: Consertei o modo interativo (intera=yes). O mesmo script &quot;icom&quot; do item 1.3 acima busca pela coordenada atualizada da posição de lâmina a partir da posição de lâmina anterior, ao reportar ao usuário se está certo.</li>
<li>mar2015: Comentei umas linhas de impressão de testes que havia esquecido há tempos.</li>
<li>mai2015: Coloquei critérios para calcular se um dos feixes selecionados em uma posição do CCD é perdida ao longa da redução. Isso é feito de duas maneiras: 1) As contagens dos centróides da primeira posição de lâmina são guardadas em uma variável e caso alguma das imagens de uma posição de lâmina dê contagens 10 vezes menor que essa primeira, é porque o algoritmo perdeu o alvo. Veja que isso pode ser repensado em termo das contagens de céu, pois o objeto pode praticamente sumir se houver muitas nuvens; 2) Às vezes um dos feixes é perdido e associado erroneamente a outro feixe e para isso, é verificado se para uma mesma imagem há dois feixes diferentes associados às mesmas coordenadas (observe que se há os feixes ordinário e extraordinário e, hipoteticamente, se invertam em uma imagem, o algoritmo adicionado NÃO vai reportar o ocorrido). Isso é importante porque algumas vezes a redução não é assistida pelo usuário, o que pode deixar passar uma perda nas coordenadas. Ainda não dei um &quot;break&quot; no laço quando um objeto é perdido, mas este é o objetivo após assegurar que a implementação está funcionando. IMPORTANTE: Ir testando nas próximas reduções antes de incorporar de vez no ccdrap.</li>
<li>mai2015: Acrescentei umas mudanças sobre os arquivos de coordenadas caso existentes durante uma nova rodada (pra funcionar um pouco melhor se intera==yes)</li>
<li>jun2015: Agora identifica as coordenadas da n posições de lâmina através das coordenadas da posição imediatamente anterior. Até então era usado como referência apenas as coordenadas da primeira posição quando intera==no. Com isso, espera-se deixar de perder as coordenadas da estrela ao longo das posições de lâmina nos casos de mau acompanhamento.</li>
<li>jun2015: Consertei para excluir arquivos espúrios de rodadas anteriores no início do código.</li>
<li>jun2015: Corrigi um bug: o caminho para o dark e o valor de darksec não estavam sendo guardados em darki e darkseci!</li>
</ol>
</blockquote>
<ol class="arabic simple" start="2">
<li>reduce.cl (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>ago2014: Adicionei ganho e ruído de leitura como parâmetros do reduce.</li>
<li>ago2014: Adicionei o rootin como parâmetro obrigatório.</li>
<li>ago2014: Adicionei parâmetro para rodar grafpol.py e gerar todas modulações .png. O caminho para o código também é um parâmetro.</li>
<li>ago2014: Adicionei para executar o polrap em agupamentos de 8 posições de lâmina sempre (além do agrupamento de n posições)</li>
<li>ago2014: Adicionei ifs para o sufixo funcionar tanto antes quanto depois do filtro: ex, funciona para dsco_b_g1_0001 e dsco_g1_b_0001.</li>
<li>ago2014: Adicionei parâmetro para ler ganho e ruído de leitura dos cabeçalhos se desejado, já que estes vêm sendo guardados nos headers.</li>
<li>ago2014: Adicionei três linhas com pccdgen.wavetyp=&quot;half&quot;, pccdgen.calc=&quot;c&quot; e pccdgen.retar=180. pra segurança na redução.</li>
<li>ago2014: Resumi o código em um laço sobre o array filter={&quot;u&quot;,&quot;b&quot;,&quot;v&quot;,&quot;r&quot;,&quot;i&quot;} ao invés do mesmo bloco quintuplicado (para cada filtro).</li>
<li>ago2014: Modifiquei para imprimir as reduções de sucesso/erros ao final do reduce.</li>
<li>ago2014: Acrescentei ifs para preencher utilizar coord e coordref do ccdrap e identificar automaticamente ordinário/extraordinário após uma primeira rodada no primeiro filtro. Parâmetro usecoords determina se o ccdrap vai ser chamado dessa maneira a partir do reduce.</li>
<li>ago2014: Adicionei parâmetro para o caminho ao diretório calib. Útil quando usando calibrações de outras noites.</li>
<li>mar2015: Agora RENOMEIA os .fits quando a ordem estiver inversa entre filtro e sufixo (complemento ao item 2.5).</li>
<li>mar2015: Mensagens de erro quando não encontra os arquivos .e executáveis.</li>
<li>mar2015: Adicionei parâmetro &quot;pccdpath&quot; pra indicar o caminho ao diretório pccd.</li>
<li>mar2015: Mensagens de erro quando não encontra os campos RDNOISE e GAIN no cabeçalho.</li>
<li>mai2015: Adicionei campo para o parâmetro &quot;reject&quot;. Além disso, verifica se o valor é compatível com as configurações de CCD, bin e modo CON/EM nos headers. Se não, aborta a redução.</li>
<li>jun2015: coloquei de volta rootin como parâmetro NÃO obrigatório</li>
<li>jun2015: agora deleta arquivos espúrios no início da rodada</li>
<li>jun2015: fundi o grafrap novo, que utiliza o pyhdust.poltools (ver item 7)</li>
<li>jun2015: exclui arquivos espúrios de rodadas anteriores no início do código.</li>
</ol>
</blockquote>
<ol class="arabic simple" start="3">
<li>logpol.cl (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>out2014: Criei essa rotina para gerar os arquivos de log, a menos do .out, que deverá ser preenchido a mão.</li>
<li>out2014: Ainda necessita de testes para verificar se está tudo certo, além de aperfeiçoamentes.</li>
</ol>
</blockquote>
<ol class="arabic simple" start="4">
<li>beacon.cl (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>jun2014: Adicionei o novo script logpol.cl</li>
</ol>
</blockquote>
<ol class="arabic simple" start="5">
<li>calib.cl (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>mar2015: Deleta arquivos &quot;avg&quot; da rodada anterior caso exista no diretório calib.</li>
<li>mar2015: Funciona tanto para arquivos nomeados na ordem _filtro_suf_ quanto na ordem _suf_filtro_.</li>
<li>mar2015: Agora combina todos os flats cúbicos encontrados com o mesmo sufixo. Por exemplo, se houver flat_b_001.fits e flat_b_002.fits, vai combinar os fits de cada série no avg_flat_b.fits final.</li>
</ol>
</blockquote>
<ol class="arabic simple" start="6">
<li>pccdgen.cl (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>mar2015: Mudei fileexe default para outro endereço (arquivo para caminho do pccd2000gen05.mac.e).</li>
</ol>
</blockquote>
<ol class="arabic simple" start="7">
<li>grafpol.py (Bednarski)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>jun2015: Reescrevi o grafpol para usar como base a tarefa pyhdust.poltools.grafpol.</li>
<li>jun2015: Aceita dois parâmetros de entrada (OPCIONAIS): 1) o caminho para o diretório onde estão os .log a serem plotados (se não determinado, supões '.'); 2) o sufixo dos .log iniciado com o caractere '_' (se não determinado, vai gerar o gráfico para todos sufixos).</li>
</ol>
</blockquote>
<ol class="arabic simple" start="8">
<li>reduce_spec.cl (Moser)</li>
</ol>
<blockquote>
<ol class="loweralpha simple">
<li>mar2016: Resize=no</li>
</ol>
</blockquote>
</div>
</div>
</body>
</html>
